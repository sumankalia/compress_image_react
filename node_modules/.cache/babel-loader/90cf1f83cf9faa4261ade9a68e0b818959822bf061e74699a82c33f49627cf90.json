{"ast":null,"code":"var _jsxFileName = \"/Users/sumankalia/Documents/Yt_Tutorials/react-images-demo/src/components/image-compress.js\";\nimport React from \"react\";\nimport imageCompression from \"browser-image-compression\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst units = [\"bytes\", \"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\", \"EiB\", \"ZiB\", \"YiB\"];\nfunction niceBytes(x) {\n  let l = 0,\n    n = parseInt(x, 10) || 0;\n  while (n >= 1024 && ++l) {\n    n = n / 1024;\n  }\n  return n.toFixed(n < 10 && l > 0 ? 1 : 0) + \" \" + units[l];\n}\nconst imageSize = file => {\n  const reader = new FileReader();\n  reader.readAsDataURL(file);\n  const promise = new Promise((resolve, reject) => {\n    reader.onload = function (e) {\n      const image = new Image();\n      image.src = e.target.result;\n      image.onload = function () {\n        const height = this.height;\n        const width = this.width;\n        resolve({\n          width,\n          height\n        });\n      };\n      image.onerror = reject;\n    };\n  });\n  return promise;\n};\nconst ImageCompressor = () => {\n  const compressImage = async file => {\n    const imageDimensions = await imageSize(file);\n    console.log({\n      imageDimensions,\n      size: niceBytes(file.size)\n    });\n    const options = {\n      maxSizeMB: 1,\n      maxWidthOrHeight: (imageDimensions === null || imageDimensions === void 0 ? void 0 : imageDimensions.width) > 1300 ? 1300 : imageDimensions === null || imageDimensions === void 0 ? void 0 : imageDimensions.width,\n      useWebWorker: true\n    };\n    const compressedImg = await imageCompression(file, options);\n    return compressedImg;\n  };\n  const uploadImage = async files => {\n    const image = await compressImage(files[0]);\n    const imageDimensions = await imageSize(image);\n    console.log({\n      Compressed: imageDimensions,\n      size: niceBytes(image.size)\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"600px\",\n      margin: \"20px auto\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control\",\n          type: \"file\",\n          onChange: e => uploadImage(e.target.files)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_c = ImageCompressor;\nexport default ImageCompressor;\nvar _c;\n$RefreshReg$(_c, \"ImageCompressor\");","map":{"version":3,"names":["React","imageCompression","jsxDEV","_jsxDEV","units","niceBytes","x","l","n","parseInt","toFixed","imageSize","file","reader","FileReader","readAsDataURL","promise","Promise","resolve","reject","onload","e","image","Image","src","target","result","height","width","onerror","ImageCompressor","compressImage","imageDimensions","console","log","size","options","maxSizeMB","maxWidthOrHeight","useWebWorker","compressedImg","uploadImage","files","Compressed","style","margin","children","className","type","onChange","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/sumankalia/Documents/Yt_Tutorials/react-images-demo/src/components/image-compress.js"],"sourcesContent":["import React from \"react\";\nimport imageCompression from \"browser-image-compression\";\n\nconst units = [\"bytes\", \"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\", \"EiB\", \"ZiB\", \"YiB\"];\n\nfunction niceBytes(x) {\n  let l = 0,\n    n = parseInt(x, 10) || 0;\n\n  while (n >= 1024 && ++l) {\n    n = n / 1024;\n  }\n\n  return n.toFixed(n < 10 && l > 0 ? 1 : 0) + \" \" + units[l];\n}\nconst imageSize = (file) => {\n  const reader = new FileReader();\n\n  reader.readAsDataURL(file);\n\n  const promise = new Promise((resolve, reject) => {\n    reader.onload = function (e) {\n      const image = new Image();\n\n      image.src = e.target.result;\n\n      image.onload = function () {\n        const height = this.height;\n        const width = this.width;\n\n        resolve({ width, height });\n      };\n\n      image.onerror = reject;\n    };\n  });\n\n  return promise;\n};\n\nconst ImageCompressor = () => {\n  const compressImage = async (file) => {\n    const imageDimensions = await imageSize(file);\n    console.log({ imageDimensions, size: niceBytes(file.size) });\n\n    const options = {\n      maxSizeMB: 1,\n      maxWidthOrHeight:\n        imageDimensions?.width > 1300 ? 1300 : imageDimensions?.width,\n      useWebWorker: true,\n    };\n\n    const compressedImg = await imageCompression(file, options);\n\n    return compressedImg;\n  };\n\n  const uploadImage = async (files) => {\n    const image = await compressImage(files[0]);\n    const imageDimensions = await imageSize(image);\n\n    console.log({ Compressed: imageDimensions, size: niceBytes(image.size) });\n  };\n  return (\n    <div style={{ width: \"600px\", margin: \"20px auto\" }}>\n      <form>\n        <div className=\"col\">\n          <input\n            className=\"form-control\"\n            type=\"file\"\n            onChange={(e) => uploadImage(e.target.files)}\n          />\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ImageCompressor;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}